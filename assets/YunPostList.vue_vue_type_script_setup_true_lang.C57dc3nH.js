import{q as B}from"./chunks/@vueuse/motion.DhjSK7p0.js";import{i as j,l as D,_ as M,g as F,q as I}from"./app.BLsPbhY6.js";import"./chunks/dayjs.Csn7IZCt.js";import{u as q}from"./chunks/vue-router.C9-pOeEs.js";import{U as i,a9 as z,Z as n,X as y,Y as c,bB as o,b_ as k,F as C,bd as T,bf as L,aO as P,b3 as t,_,a5 as A,bt as S,c6 as E,bp as H,bV as O,bh as G,a8 as Q,bb as Y,a6 as w,aQ as U}from"./framework.Dgturmf_.js";import{b as X,_ as Z,a as J}from"./YunPostMeta.vue_vue_type_style_index_0_lang.B-c0EppX.js";import{u as K}from"./post.BmAu4k-n.js";import{u as W}from"./chunks/vue-i18n.BhcMBmP7.js";function ee(p){const r=q(),s=i(()=>Number.parseInt(r.params.page||"1")),a=i(()=>Math.ceil(p.total/p.pageSize)),u=i(()=>s.value===1||s.value===a.value?3:2);function d(l){return l===1||l===a.value?!0:l>s.value-u.value&&l<s.value+u.value}function m(l){return l===1?"/":`/page/${l}`}const v=i(()=>m(s.value-1)),g=i(()=>m(s.value+1)),e=i(()=>s.value>1),x=i(()=>s.value<a.value);return{curPage:s,totalPages:a,showPage:d,surLen:u,getTo:m,prevTo:v,nextTo:g,showPrev:e,showNext:x}}const te={class:"pagination"},se=z({__name:"YunPagination",props:{total:{},pageSize:{}},setup(p,{expose:r}){const s=p,{curPage:a,totalPages:u,showPage:d,getTo:m,surLen:v,prevTo:g,nextTo:e,showPrev:x,showNext:l}=ee({total:s.total,pageSize:s.pageSize});return r({curPage:a}),($,h)=>{const b=L("RouterLink");return t(),n("nav",te,[o(x)?(t(),y(b,{key:0,class:"page-number",to:o(g),"aria-label":"prev"},{default:k(()=>[...h[0]||(h[0]=[_("div",{"i-ri-arrow-left-s-line":""},null,-1)])]),_:1},8,["to"])):c("v-if",!0),(t(!0),n(C,null,T(o(u),f=>(t(),n(C,null,[o(d)(f)?(t(),y(b,{key:f,class:P(["page-number",o(a)===f&&"active"]),to:o(m)(f)},{default:k(()=>[A(S(f),1)]),_:2},1032,["class","to"])):f===o(a)-o(v)?(t(),n("span",{key:`prev-space-${f}`,class:"space",disabled:""}," ... ")):f===o(a)+o(v)?(t(),n("span",{key:`next-space-${f}`,class:"space",disabled:""}," ... ")):c("v-if",!0)],64))),256)),o(l)?(t(),y(b,{key:1,class:"page-number",to:o(e),"aria-label":"next"},{default:k(()=>[...h[1]||(h[1]=[_("div",{"i-ri-arrow-right-s-line":""},null,-1)])]),_:1},8,["to"])):c("v-if",!0)])}}}),oe={},ne={w:"full",h:"30%",class:"absolute bottom-0 bg-gradient-to-t from-$va-c-bg-light to-transparent z-1"};function ae(p,r){return t(),n("div",ne)}const re=E(oe,[["render",ae]]),le=z({__name:"ValaxyDynamicComponent",props:{templateStr:{},data:{default:()=>({})}},setup(p){const r=p,s=H(null);async function a(){const d={render:B(r.templateStr),data:()=>r.data};s.value=Q(()=>Promise.resolve(d))}return O(()=>[r.templateStr,r.data],()=>{a()},{immediate:!0}),(u,d)=>(t(),y(G(s.value)))}}),ce={class:"flex flex-1 of-hidden justify-start items-start post-card-info",w:"full"},ie=["src","alt"],pe={class:"flex-center title text-2xl",text:"center",font:"serif black"},ue={flex:"~ grow col",w:"full",justify:"center",items:"center"},me={key:0,py:"1"},fe={key:0,class:"markdown-body",op:"90",text:"left",w:"full",p:"x-8 y-2"},de=["innerHTML"],_e={key:2,m:"b-5"},ve=["href"],ge={w:"full",class:"yun-card-actions flex justify-between p-4","min-h":"10",text:"sm"},he={class:"post-categories inline-flex",flex:"wrap 1",items:"center"},ye=z({__name:"YunPostCard",props:{post:{}},setup(p){const r=p,{t:s}=W(),{$tO:a}=j(),{icon:u,styles:d,color:m}=K(r.post.type),v=Y("bg-gradient-to-r gradient-text from-$va-c-primary to-$va-c-primary-lighter"),g=i(()=>m?"":r.post.postTitleClass||v.value);return(e,x)=>{const l=M,$=X,h=le,b=re,f=Z,R=J,V=D,N=L("RouterLink");return t(),y(N,{class:"post-card-link flex-center w-full",to:e.post.path||""},{default:k(()=>[w(V,{class:P(["w-full hover:scale-102 hover:z-1",e.post.cover?"post-card-image":"post-card"]),mx:"4",overflow:"hidden",style:U(o(d))},{default:k(()=>[_("div",ce,[e.post.cover?(t(),n("img",{key:0,src:e.post.cover,alt:o(s)("post.cover"),width:"320",height:"180",w:"40%",h:"54",class:"cover object-cover object-center md:shadow",loading:"lazy"},null,8,ie)):c("v-if",!0),_("div",{class:P(["flex flex-col items-center relative",e.post.cover&&"h-54"]),w:"full"},[w(l,{class:P(["post-title-link cursor-pointer",g.value]),to:e.post.path||"",m:"t-3"},{default:k(()=>[_("div",pe,[e.post.type?(t(),n("div",{key:0,class:P(["inline-flex",o(u)]),m:"r-1"},null,2)):c("v-if",!0),_("span",null,S(o(a)(e.post.title)),1)])]),_:1},8,["to","class"]),w($,{frontmatter:e.post},null,8,["frontmatter"]),_("div",ue,[e.post.excerpt_type==="text"?(t(),n("div",me)):c("v-if",!0),e.post.excerpt?(t(),n(C,{key:1},[e.post.excerpt_type==="html"?(t(),n("div",fe,[w(h,{"template-str":e.post.excerpt},null,8,["template-str"])])):(t(),n("div",{key:1,class:"markdown-body",op:"90",text:"left",w:"full",p:"x-8 y-2",innerHTML:e.post.excerpt},null,8,de))],64)):(t(),n("div",_e))]),c(' <div m="b-5" /> '),e.post.excerpt?(t(),y(b,{key:0})):c("v-if",!0),e.post.url?(t(),n("a",{key:1,href:e.post.url,class:"post-link-btn shadow hover:shadow-md z-2",rounded:"",target:"_blank",m:"b-4"},S(o(s)("post.view_link")),9,ve)):c("v-if",!0)],2)]),c(" always show "),_("div",ge,[_("div",he,[w(f,{m:"l-1",categories:e.post.categories},null,8,["categories"])]),e.post.tags?(t(),y(R,{key:0,m:"1",tags:e.post.tags},null,8,["tags"])):c("v-if",!0)])]),_:1},8,["class","style"])]),_:1},8,["to"])}}}),be={flex:"~ col",class:"yun-post-list gap-4 items-center",w:"full",p:"x-4 lt-sm:0"},we={key:0,py2:"",op50:"","text-center":""},Le=z({__name:"YunPostList",props:{type:{},posts:{}},setup(p){const r=p,s=Y(),a=i(()=>s.value?.curPage||1),u=F(),d=I(),m=i(()=>d.value.pageSize),v=i(()=>(r.posts||u.postList).filter(e=>!e.hide)),g=i(()=>v.value.slice((a.value-1)*m.value,a.value*m.value));return(e,x)=>{const l=ye,$=se;return t(),n(C,null,[_("div",be,[g.value.length?c("v-if",!0):(t(),n("div",we," 博主还什么都没写哦～ ")),(t(!0),n(C,null,T(g.value,(h,b)=>(t(),y(l,{key:b,post:h},null,8,["post"]))),128))]),w($,{ref_key:"paginationRef",ref:s,class:"mt-5",total:v.value.length,"page-size":m.value},null,8,["total","page-size"])],64)}}});export{Le as _};
